unit unitDM;

interface

uses
  System.SysUtils, System.Classes, Data.DB, Data.Win.ADODB, ppProd, ppClass,
  ppReport, ppComm, ppRelatv, ppDB, ppDBPipe, ppDBBDE, ppPrnabl, ppCtrls,
  ppBands, ppCache, ppDesignLayer, ppParameter;

type
  TDM = class(TDataModule)
    conexao: TADOConnection;
    sqlCidades: TADOQuery;
    tbCidades: TADOTable;
    dsCidades: TDataSource;
    tbClientes: TADOTable;
    dsClientes: TDataSource;
    sqlClientes: TADOQuery;
    dsSqlCidades: TDataSource;
    dsSqlClientes: TDataSource;
    tbClientescodigo_cliente: TAutoIncField;
    tbClientesCGC_CPF_cliente: TWideStringField;
    tbClientesnome: TWideStringField;
    tbClientestelefone: TWideStringField;
    tbClientesendereco: TWideStringField;
    tbClientesbairro: TWideStringField;
    tbClientescomplemento: TWideStringField;
    tbClientesemail: TWideStringField;
    tbClientescodigo_Cidade: TIntegerField;
    tbClientescep: TWideStringField;
    sqlCidadescodigo_cidade: TAutoIncField;
    sqlCidadesnome: TWideStringField;
    sqlCidadesestado: TWideStringField;
    sqlCidadescep_Inicial: TWideStringField;
    sqlCidadescep_Final: TWideStringField;
    tbCidadescodigo_cidade: TAutoIncField;
    tbCidadesnome: TWideStringField;
    tbCidadesestado: TWideStringField;
    tbCidadescep_Inicial: TWideStringField;
    tbCidadescep_Final: TWideStringField;
    sqlClientescodigo_cliente: TAutoIncField;
    sqlClientesCGC_CPF_cliente: TWideStringField;
    sqlClientesnome: TWideStringField;
    sqlClientestelefone: TWideStringField;
    sqlClientesendereco: TWideStringField;
    sqlClientesbairro: TWideStringField;
    sqlClientescomplemento: TWideStringField;
    sqlClientesemail: TWideStringField;
    sqlClientescodigo_Cidade: TIntegerField;
    sqlClientescep: TWideStringField;
    sqlClientesnomeCidade: TStringField;
    pipelineClientes: TppBDEPipeline;
    dsReport: TDataSource;
    dsSqlReport: TADOQuery;
    dsSqlReportcodCliente: TAutoIncField;
    dsSqlReportcpfCnpjCliente: TWideStringField;
    dsSqlReportnomeCliente: TWideStringField;
    dsSqlReporttelefoneCliente: TWideStringField;
    dsSqlReportenderecoCliente: TWideStringField;
    dsSqlReportbairroCliente: TWideStringField;
    dsSqlReportcomplementoCliente: TWideStringField;
    dsSqlReportemailCliente: TWideStringField;
    dsSqlReportcepCliente: TWideStringField;
    dsSqlReportcodCidade: TAutoIncField;
    dsSqlReportnomeCidade: TWideStringField;
    dsSqlReportnomeEstadoCidade: TWideStringField;
    dsSqlReportcepIncialCidade: TWideStringField;
    dsSqlReportcepFinalCidade: TWideStringField;
    reportClientes: TppReport;
    ppParameterList1: TppParameterList;
    ppDesignLayers1: TppDesignLayers;
    ppDesignLayer1: TppDesignLayer;
    ppHeaderBand1: TppHeaderBand;
    ppDetailBand1: TppDetailBand;
    ppFooterBand1: TppFooterBand;
    ppLabel1: TppLabel;
    ppDBText1: TppDBText;
    ppLabel2: TppLabel;
    ppDBText2: TppDBText;
    pipelineClientesAgrupado: TppBDEPipeline;
    dsReportAgrupado: TDataSource;
    dsSqlReportAgrupado: TADOQuery;
    AutoIncField1: TAutoIncField;
    WideStringField1: TWideStringField;
    WideStringField2: TWideStringField;
    WideStringField3: TWideStringField;
    WideStringField4: TWideStringField;
    WideStringField5: TWideStringField;
    WideStringField6: TWideStringField;
    WideStringField7: TWideStringField;
    WideStringField8: TWideStringField;
    AutoIncField2: TAutoIncField;
    WideStringField9: TWideStringField;
    WideStringField10: TWideStringField;
    WideStringField11: TWideStringField;
    WideStringField12: TWideStringField;
    reportClientesAgrupado: TppReport;
    ppHeaderBand2: TppHeaderBand;
    ppDetailBand2: TppDetailBand;
    ppLabel3: TppLabel;
    ppDBText3: TppDBText;
    ppLabel4: TppLabel;
    ppDBText4: TppDBText;
    ppFooterBand2: TppFooterBand;
    ppDesignLayers2: TppDesignLayers;
    ppDesignLayer2: TppDesignLayer;
    ppParameterList2: TppParameterList;
    procedure tbCidadesAfterScroll(DataSet: TDataSet);
    procedure DataModuleCreate(Sender: TObject);

  private
    { Private declarations }
  public
    { Public declarations }
  end;

var
  DM: TDM;

implementation

{%CLASSGROUP 'Vcl.Controls.TControl'}

uses cadCidades;



{$R *.dfm}


procedure TDM.DataModuleCreate(Sender: TObject);
begin
  sqlCidades.Close;
  sqlClientes.Close;
end;

procedure TDM.tbCidadesAfterScroll(DataSet: TDataSet);
begin
  if tbCidades.State in [dsBrowse, dsEdit, dsInsert] then
  begin
    if tbCidades.Eof then
      begin
        formCadCidades.btProximo.Enabled := False;
        formCadCidades.btUltimo.Enabled := False;
      end
    else
      begin
        formCadCidades.btProximo.Enabled := True;
        formCadCidades.btUltimo.Enabled := True;
      end;
    if tbCidades.Bof then
      begin
        formCadCidades.btPrimeiro.Enabled := False;
        formCadCidades.btAnterior.Enabled := False;
      end
    else
      begin
        formCadCidades.btPrimeiro.Enabled := True;
        formCadCidades.btAnterior.Enabled := True;
      end;
  end;

end;


end.
